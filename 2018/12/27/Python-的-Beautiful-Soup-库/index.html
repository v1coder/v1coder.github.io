<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword" content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        Python 的 Beautiful Soup 库 - v1coder
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i>  </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/avatar.jpg">
        </div>
        <div class="name">
            <i>v1coder</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li>
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li>
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li>
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#BeautifulSoup-过滤器"><span class="toc-text">BeautifulSoup 过滤器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#find-all-方法"><span class="toc-text">find_all 方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#name-参数"><span class="toc-text">name 参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#keyword-参数"><span class="toc-text">keyword 参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#string-参数"><span class="toc-text">string 参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#limit-参数"><span class="toc-text">limit 参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#recursive-参数"><span class="toc-text">recursive 参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#find-方法"><span class="toc-text">find() 方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#标签的属性-attrs"><span class="toc-text">标签的属性 attrs</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#select-方法"><span class="toc-text">select() 方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#通过-tag-名查找"><span class="toc-text">通过 tag 名查找</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#通过类名查找"><span class="toc-text">通过类名查找</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#通过-id-名查找"><span class="toc-text">通过 id 名查找</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#通过属性查找"><span class="toc-text">通过属性查找</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#text与-string"><span class="toc-text">.text与.string</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用-BeautifulSoup-提取网页内容-demo"><span class="toc-text">使用 BeautifulSoup 提取网页内容 demo</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input">
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i>  </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        Python 的 Beautiful Soup 库
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2018-12-27 22:00:19</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#spider" title="spider">spider</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#python" title="python">python</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#BeautifulSoup" title="BeautifulSoup">BeautifulSoup</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <p>Beautiful Soup 4已经被移植到BS4了，所以要 </p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">from</span> <span class="keyword">bs4 </span><span class="meta">import</span> <span class="keyword">BeautifulSoup</span></span><br></pre></td></tr></table></figure>
<p>创建 beautifulsoup 对象 </p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">soup</span> = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br></pre></td></tr></table></figure>
<p>另外，我们还可以用本地 HTML 文件来创建对象，例如 </p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(<span class="name">open</span>('index.html'), 'lxml')</span><br></pre></td></tr></table></figure>
<p>格式化输出： </p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">print</span> soup.prettify()</span><br></pre></td></tr></table></figure>
<p><br></p>
<hr>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">html_doc = """</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span><span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">title</span>&gt;</span>The Dormouse's story<span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>The Dormouse's story<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"story"</span>&gt;</span>Once upon a time there were three little sisters; and their names were</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://example.com/elsie"</span> <span class="attr">class</span>=<span class="string">"sister"</span> <span class="attr">id</span>=<span class="string">"link1"</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://example.com/lacie"</span> <span class="attr">class</span>=<span class="string">"sister"</span> <span class="attr">id</span>=<span class="string">"link2"</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span> and</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://example.com/tillie"</span> <span class="attr">class</span>=<span class="string">"sister"</span> <span class="attr">id</span>=<span class="string">"link3"</span>&gt;</span>Tillie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>;</span><br><span class="line">and they lived at the bottom of a well.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"story"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">"""</span><br></pre></td></tr></table></figure>
<p>上面是示例文档，后面演示的都是搜索上面 <code>html_doc</code> 中的内容</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">from</span> <span class="keyword">bs4 </span><span class="meta">import</span> <span class="keyword">BeautifulSoup</span></span><br><span class="line"><span class="keyword">soup </span>= <span class="keyword">BeautifulSoup(html_doc)</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="BeautifulSoup-过滤器"><a href="#BeautifulSoup-过滤器" class="headerlink" title="BeautifulSoup 过滤器"></a>BeautifulSoup 过滤器</h3><p>这些过滤器可以被用在 tag 的 name 中，节点的属性中，字符串中或他们的混合中。 </p>
<p>1.字符串<br>传入字符串，查找与字符串完整匹配的内容 </p>
<p>2.正则表达式<br>传入正则表达式 re.compile(规则)，通过正则表达式来匹配内容 </p>
<p>3.列表<br>传入列表参数，如 [‘div’,’a’,’b’]，返回与列表中任一元素匹配的内容。 </p>
<p>4.True<br>匹配任何值 </p>
<p>5.方法<br>还可以传入自定义函数 </p>
<p><br></p>
<hr>
<h3 id="find-all-方法"><a href="#find-all-方法" class="headerlink" title="find_all 方法"></a>find_all 方法</h3><p>搜索当前 tag 的所有子节点,并判断是否符合过滤器的条件。<br>返回的结果是所有符合条件的 tag 组成的列表。</p>
<p>语法： </p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find_all( <span class="name">name</span> , attrs , recursive , string , **kwargs )</span><br></pre></td></tr></table></figure>
<p><br></p>
<h4 id="name-参数"><a href="#name-参数" class="headerlink" title="name 参数"></a>name 参数</h4><p>查找所有名字为 name 的 tag<br>name 参数的值可以使任一类型的 过滤器：字符串，正则表达式，列表，方法或是 True . </p>
<p>a. 给 name 参数传入字符串 </p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(<span class="string">"title"</span>)</span><br><span class="line"># <span class="meta">[&lt;title&gt;The Dormouse's story&lt;/title&gt;]</span></span><br><span class="line"></span><br><span class="line">soup.find_all(<span class="symbol">'b</span>')</span><br><span class="line"># <span class="meta">[&lt;b&gt;The Dormouse's story&lt;/b&gt;]</span></span><br><span class="line"></span><br><span class="line">print soup.find_all(<span class="symbol">'a</span>')</span><br><span class="line">#<span class="meta">[&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;, &lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;, &lt;a class="sister" href="http://example.com/tillie" id="link3"&gt;Tillie&lt;/a&gt;]</span></span><br></pre></td></tr></table></figure>
<p>b.传入正则表达式 </p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 找出所有以b开头的标签,这表示&lt;body&gt;和&lt;b&gt;标签都应该被找到</span></span><br><span class="line">import re</span><br><span class="line">for <span class="keyword">tag</span> <span class="title">in</span> soup.find_all(re.compile(<span class="string">"^b"</span>)):</span><br><span class="line">    print(<span class="keyword">tag</span>.name)</span><br><span class="line"><span class="comment"># body</span></span><br><span class="line"><span class="comment"># b</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 找出所有名字中包含”t”的标签:</span></span><br><span class="line">for <span class="keyword">tag</span> <span class="title">in</span> soup.find_all(re.compile(<span class="string">"t"</span>)):</span><br><span class="line">    print(<span class="keyword">tag</span>.name)</span><br><span class="line"><span class="comment"># html</span></span><br><span class="line"><span class="comment"># title</span></span><br></pre></td></tr></table></figure>
<p>c.传入列表 </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 找到文档中所有<span class="tag">&lt;<span class="name">a</span>&gt;</span>标签和<span class="tag">&lt;<span class="name">b</span>&gt;</span>标签:</span><br><span class="line">soup.find_all(["a", "b"])</span><br><span class="line"># [<span class="tag">&lt;<span class="name">b</span>&gt;</span>The Dormouse's story<span class="tag">&lt;/<span class="name">b</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"sister"</span> <span class="attr">href</span>=<span class="string">"http://example.com/elsie"</span> <span class="attr">id</span>=<span class="string">"link1"</span>&gt;</span>Elsie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"sister"</span> <span class="attr">href</span>=<span class="string">"http://example.com/lacie"</span> <span class="attr">id</span>=<span class="string">"link2"</span>&gt;</span>Lacie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line">#  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"sister"</span> <span class="attr">href</span>=<span class="string">"http://example.com/tillie"</span> <span class="attr">id</span>=<span class="string">"link3"</span>&gt;</span>Tillie<span class="tag">&lt;/<span class="name">a</span>&gt;</span>]</span><br></pre></td></tr></table></figure>
<p>d.传入True<br>True 可以匹配任何值,下面代码查找到所有的tag </p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> tag in soup.find_all(True):</span><br><span class="line">    print(tag.name)</span><br><span class="line"><span class="meta"># html</span></span><br><span class="line"><span class="meta"># head</span></span><br><span class="line"><span class="meta"># title</span></span><br><span class="line"><span class="meta"># body</span></span><br><span class="line"><span class="meta"># p</span></span><br><span class="line"><span class="meta"># b</span></span><br><span class="line"><span class="meta"># p</span></span><br><span class="line"><span class="meta"># a</span></span><br><span class="line"><span class="meta"># a</span></span><br><span class="line"><span class="meta"># a</span></span><br><span class="line"><span class="meta"># p</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<h4 id="keyword-参数"><a href="#keyword-参数" class="headerlink" title="keyword 参数"></a>keyword 参数</h4><p>如果一个指定名字的参数不是搜索内置的参数名,搜索时会把该参数当作指定名字tag的属性来搜索<br>参数类型包括：字符串 , 正则表达式 , 列表, True . </p>
<p>1.传入字符串 </p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 找到所有属性名为 id 且属性值为 link2 的字符串</span><br><span class="line">soup.find_all(id='link2')</span><br><span class="line"># <span class="meta">[&lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;]</span></span><br></pre></td></tr></table></figure>
<p>2.传入正则表达式 </p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(href=re.compile(<span class="string">"elsie"</span>))</span><br><span class="line"># <span class="meta">[&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;]</span></span><br></pre></td></tr></table></figure>
<p>3.True </p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 查找所有包含 id 属性的tag,无论 id 的值是什么:</span><br><span class="line">soup.find_all(id=<span class="literal">True</span>)</span><br><span class="line"># [&lt;a <span class="keyword">class</span>=<span class="string">"sister"</span> href=<span class="string">"http://example.com/elsie"</span> id=<span class="string">"link1"</span>&gt;Elsie&lt;/a&gt;,</span><br><span class="line">#  &lt;a <span class="keyword">class</span>=<span class="string">"sister"</span> href=<span class="string">"http://example.com/lacie"</span> id=<span class="string">"link2"</span>&gt;Lacie&lt;/a&gt;,</span><br><span class="line">#  &lt;a <span class="keyword">class</span>=<span class="string">"sister"</span> href=<span class="string">"http://example.com/tillie"</span> id=<span class="string">"link3"</span>&gt;Tillie&lt;/a&gt;]</span><br></pre></td></tr></table></figure>
<p>同时匹配多个属性 </p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(href=re.compile(<span class="string">"elsie"</span>), id='link1')</span><br><span class="line"># <span class="meta">[&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;three&lt;/a&gt;]</span></span><br></pre></td></tr></table></figure>
<p>想搜索 class 属性，但 class 是 python 关键字，所以用 <code>class_</code> 代替 </p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(<span class="string">"a"</span>, class_=<span class="string">"sister"</span>)</span><br><span class="line"># [&lt;a <span class="keyword">class</span>=<span class="string">"sister"</span> href=<span class="string">"http://example.com/elsie"</span> id=<span class="string">"link1"</span>&gt;Elsie&lt;/a&gt;,</span><br><span class="line">#  &lt;a <span class="keyword">class</span>=<span class="string">"sister"</span> href=<span class="string">"http://example.com/lacie"</span> id=<span class="string">"link2"</span>&gt;Lacie&lt;/a&gt;,</span><br><span class="line">#  &lt;a <span class="keyword">class</span>=<span class="string">"sister"</span> href=<span class="string">"http://example.com/tillie"</span> id=<span class="string">"link3"</span>&gt;Tillie&lt;/a&gt;]</span><br></pre></td></tr></table></figure>
<p>HTML5中的 data-* 属性在搜索不能使用 </p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data_soup = BeautifulSoup('&lt;<span class="keyword">div</span> data-foo=<span class="string">"value"</span>&gt;foo!&lt;/<span class="keyword">div</span>&gt;')</span><br><span class="line">data_soup.find_all(data-foo=<span class="string">"value"</span>)</span><br><span class="line"><span class="comment"># SyntaxError: keyword can't be an expression</span></span><br></pre></td></tr></table></figure>
<p>可以通过 find_all() 方法的 attrs 参数定义一个字典参数来搜索包含特殊属性的tag </p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data_soup.find_all(attrs=&#123;<span class="string">"data-foo"</span>: <span class="string">"value"</span>&#125;)</span><br><span class="line"># <span class="meta">[&lt;div data-foo="value"&gt;foo!&lt;/div&gt;]</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<h4 id="string-参数"><a href="#string-参数" class="headerlink" title="string 参数"></a>string 参数</h4><p>匹配 文档 中的字符串内容，返回字符串列表<br>string 参数接受 字符串 , 正则表达式 , 列表, True 和方法 </p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(text=<span class="string">"Elsie"</span>)</span><br><span class="line"><span class="comment"># [u'Elsie']</span></span><br><span class="line"></span><br><span class="line">soup.find_all(text=[<span class="string">"Tillie"</span>, <span class="string">"Elsie"</span>, <span class="string">"Lacie"</span>])</span><br><span class="line"><span class="comment"># [u'Elsie', u'Lacie', u'Tillie']</span></span><br><span class="line"></span><br><span class="line">soup.find_all(text=re.compile(<span class="string">"Dormouse"</span>))</span><br><span class="line">[<span class="string">u"The Dormouse's story"</span>, <span class="string">u"The Dormouse's story"</span>]</span><br></pre></td></tr></table></figure>
<p>可以与其它参数混合使用 </p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 搜索内容里面包含“Elsie”的&lt;a&gt;标签:</span><br><span class="line">soup.find_all(<span class="string">"a"</span>, string=<span class="string">"Elsie"</span>)</span><br><span class="line"># <span class="meta">[&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;Elsie&lt;/a&gt;]</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<h4 id="limit-参数"><a href="#limit-参数" class="headerlink" title="limit 参数"></a>limit 参数</h4><p>设置匹配上限，当搜索到的结果数量达到 limit 的限制时,就停止搜索返回结果 </p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 文档树中有<span class="number">3</span>个tag符合搜索条件,但结果只返回<span class="number">2</span>个</span><br><span class="line">soup.find_all(<span class="string">"a"</span>, limit=<span class="number">2</span>)</span><br><span class="line"># [&lt;a <span class="keyword">class</span>=<span class="string">"sister"</span> href=<span class="string">"http://example.com/elsie"</span> id=<span class="string">"link1"</span>&gt;Elsie&lt;/a&gt;,</span><br><span class="line">#  &lt;a <span class="keyword">class</span>=<span class="string">"sister"</span> href=<span class="string">"http://example.com/lacie"</span> id=<span class="string">"link2"</span>&gt;Lacie&lt;/a&gt;]</span><br></pre></td></tr></table></figure>
<p><br></p>
<h4 id="recursive-参数"><a href="#recursive-参数" class="headerlink" title="recursive 参数"></a>recursive 参数</h4><p>find_all() 方法时默认检索当前 tag 的所有子孙节点,如果只想搜索tag的直接子节点,可以使用参数 recursive=False </p>
<p>一段简单的文档:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span></span><br><span class="line">   The Dormouse's story</span><br><span class="line">  <span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>是否使用 recursive 参数的搜索结果: </p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">soup.html.find_all(<span class="string">"title"</span>)</span><br><span class="line"># <span class="meta">[&lt;title&gt;The Dormouse's story&lt;/title&gt;]</span></span><br><span class="line"> </span><br><span class="line">soup.html.find_all(<span class="string">"title"</span>, recursive=False)</span><br><span class="line"># []</span><br></pre></td></tr></table></figure>
<p><title>标签在 <html> 标签下, 但并不是直接子节点, <head><meta name="generator" content="Hexo 3.8.0"> 标签才是直接子节点. 在允许查询所有后代节点时能够查找到 <title> 标签. 但是使用了 recursive=False 参数之后,只能查找直接子节点,这样就查不到 <title> 标签了.</title></title></head></html></title></p>
<p><br></p>
<p>find_all() 几乎是Beautiful Soup中最常用的搜索方法,所以我们定义了它的简写方法. </p>
<p>下面两行代码是等价的: </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(<span class="string">"a"</span>)</span><br><span class="line"><span class="function"><span class="title">soup</span><span class="params">(<span class="string">"a"</span>)</span></span></span><br></pre></td></tr></table></figure>
<p>这两行代码也是等价的: </p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">soup.title.find_all(<span class="attribute">string</span>=<span class="literal">True</span>)</span><br><span class="line">soup.title(<span class="attribute">string</span>=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p><br></p>
<hr>
<h3 id="find-方法"><a href="#find-方法" class="headerlink" title="find() 方法"></a>find() 方法</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find( <span class="name">name</span> , attrs , recursive , string , **kwargs )</span><br></pre></td></tr></table></figure>
<p>find() 与 find_all() 区别： </p>
<p>find_all() 返回符合条件的所有 tag，find() 只返回符合条件的第一个 tag </p>
<p>find_all() 返回结果是列表,而 find() 方法直接返回结果. </p>
<p>find_all() 方法没有找到目标时返回空列表, find() 方法找不到目标时,返回 None . </p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all('title', limit=<span class="number">1</span>)</span><br><span class="line"># <span class="meta">[&lt;title&gt;The Dormouse's story&lt;/title&gt;]</span></span><br><span class="line"></span><br><span class="line">soup.find('title')</span><br><span class="line"># &lt;title&gt;The Dormouse's story&lt;/title&gt;</span><br></pre></td></tr></table></figure>
<p><br></p>
<hr>
<h4 id="标签的属性-attrs"><a href="#标签的属性-attrs" class="headerlink" title="标签的属性 attrs"></a>标签的属性 attrs</h4><p>把标签的所有属性打印输出了出来，结果为字典类型 </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print soup<span class="selector-class">.p</span><span class="selector-class">.attrs</span></span><br><span class="line">#&#123;<span class="string">'class'</span>: [<span class="string">'title'</span>], <span class="string">'name'</span>: <span class="string">'dromouse'</span>&#125;</span><br></pre></td></tr></table></figure>
<p>单独获取某个属性的值 </p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">print soup.p[<span class="string">'class'</span>]</span><br><span class="line"><span class="meta">#['title’]</span></span><br><span class="line"></span><br><span class="line">print soup.p.<span class="keyword">get</span>(<span class="string">'class'</span>)</span><br><span class="line"><span class="meta">#['title']</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<hr>
<h3 id="select-方法"><a href="#select-方法" class="headerlink" title="select() 方法"></a>select() 方法</h3><p>用 <a href="http://www.w3school.com.cn/cssref/css_selectors.ASP" target="_blank" rel="noopener">CSS 选择器</a> 的语法来筛选元素，返回 tag 列表 </p>
<p>CSS选择器语法：<br>标签名不加任何修饰，类名（class=”className”引号内即为类名）前加点，id名id=”idName”引号内即为id名）前加 # </p>
<p><br></p>
<h4 id="通过-tag-名查找"><a href="#通过-tag-名查找" class="headerlink" title="通过 tag 名查找"></a>通过 tag 名查找</h4><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">print soup.select('title') </span><br><span class="line">#<span class="meta">[&lt;title&gt;The Dormouse's story&lt;/title&gt;]</span></span><br><span class="line"></span><br><span class="line">print soup.select(<span class="symbol">'a</span>')</span><br><span class="line">#<span class="meta">[&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;, &lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;, &lt;a class="sister" href="http://example.com/tillie" id="link3"&gt;Tillie&lt;/a&gt;]</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<h4 id="通过类名查找"><a href="#通过类名查找" class="headerlink" title="通过类名查找"></a>通过类名查找</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print soup.select(<span class="string">'.sister'</span>)</span><br><span class="line">#[&lt;<span class="selector-tag">a</span> class=<span class="string">"sister"</span> href=<span class="string">"http://example.com/elsie"</span> id=<span class="string">"link1"</span>&gt;Elsie&lt;/a&gt;, &lt;<span class="selector-tag">a</span> class=<span class="string">"sister"</span> href=<span class="string">"http://example.com/lacie"</span> id=<span class="string">"link2"</span>&gt;Lacie&lt;/a&gt;, &lt;<span class="selector-tag">a</span> class=<span class="string">"sister"</span> href=<span class="string">"http://example.com/tillie"</span> id=<span class="string">"link3"</span>&gt;Tillie&lt;/a&gt;]</span><br></pre></td></tr></table></figure>
<p><br></p>
<h4 id="通过-id-名查找"><a href="#通过-id-名查找" class="headerlink" title="通过 id 名查找"></a>通过 id 名查找</h4><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print soup.select('#link1')</span><br><span class="line">#<span class="meta">[&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;]</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<h4 id="通过属性查找"><a href="#通过属性查找" class="headerlink" title="通过属性查找"></a>通过属性查找</h4><p>查找时还可以加入属性元素，属性需要用中括号括起来</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">print soup.select(<span class="symbol">'a</span>[<span class="class"><span class="keyword">class</span></span>=<span class="string">"sister"</span>]')</span><br><span class="line">#[&lt;a <span class="class"><span class="keyword">class</span></span>=<span class="string">"sister"</span> href=<span class="string">"http://example.com/elsie"</span> id=<span class="string">"link1"</span>&gt;<span class="type">Elsie</span>&lt;/a&gt;, &lt;a <span class="class"><span class="keyword">class</span></span>=<span class="string">"sister"</span> href=<span class="string">"http://example.com/lacie"</span> id=<span class="string">"link2"</span>&gt;<span class="type">Lacie</span>&lt;/a&gt;, &lt;a <span class="class"><span class="keyword">class</span></span>=<span class="string">"sister"</span> href=<span class="string">"http://example.com/tillie"</span> id=<span class="string">"link3"</span>&gt;<span class="type">Tillie</span>&lt;/a&gt;]</span><br><span class="line"></span><br><span class="line">print soup.select(<span class="symbol">'a</span>[href=<span class="string">"http://example.com/elsie"</span>]')</span><br><span class="line">#[&lt;a <span class="class"><span class="keyword">class</span></span>=<span class="string">"sister"</span> href=<span class="string">"http://example.com/elsie"</span> id=<span class="string">"link1"</span>&gt;<span class="type">Elsie</span>&lt;/a&gt;]</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>是否存在某个属性来查找: </p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">soup.select(<span class="string">'a[href]'</span>)</span><br><span class="line"># [&lt;a <span class="keyword">class</span>=<span class="string">"sister"</span> href=<span class="string">"http://example.com/elsie"</span> id=<span class="string">"link1"</span>&gt;Elsie&lt;/a&gt;,</span><br><span class="line">#  &lt;a <span class="keyword">class</span>=<span class="string">"sister"</span> href=<span class="string">"http://example.com/lacie"</span> id=<span class="string">"link2"</span>&gt;Lacie&lt;/a&gt;,</span><br><span class="line">#  &lt;a <span class="keyword">class</span>=<span class="string">"sister"</span> href=<span class="string">"http://example.com/tillie"</span> id=<span class="string">"link3"</span>&gt;Tillie&lt;/a&gt;]</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>多个查找条件属于同一 tag 的，不用空格隔开； </p>
<p>多个查找条件不属于同一 tag 的，用空格隔开。 </p>
<p><br></p>
<p>（同时符合条件1和条件2的 tag）<br>选择标签名为 a，id 为 link2 的 tag： </p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">soup.select(<span class="symbol">'a</span>#link2’)</span><br><span class="line"># <span class="meta">[&lt;a class="sister" href="http://example.com/lacie" id="link2"&gt;Lacie&lt;/a&gt;]</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p>tag 之间的包含查找<br>查找标签 p 中，id 等于 link1 的 tag，二者需要用空格分开 </p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print soup.select(<span class="symbol">'p</span> #link1')</span><br><span class="line"># <span class="meta">[&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;]</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p>找到某个tag标签下的直接子标签 </p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">soup.select(<span class="string">"head &gt; title"</span>)</span><br><span class="line"># <span class="meta">[&lt;title&gt;The Dormouse's story&lt;/title&gt;]</span></span><br><span class="line"></span><br><span class="line">soup.select(<span class="string">"p &gt; a"</span>)</span><br><span class="line"># <span class="meta">[&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="meta">#  &lt;a class="sister" href="http://example.com/lacie"  id="link2"&gt;Lacie&lt;/a&gt;,</span></span><br><span class="line"><span class="meta">#  &lt;a class="sister" href="http://example.com/tillie" id="link3"&gt;Tillie&lt;/a&gt;]</span></span><br><span class="line"></span><br><span class="line">soup.select(<span class="string">"p &gt; #link1"</span>)</span><br><span class="line"># <span class="meta">[&lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;]</span></span><br><span class="line"></span><br><span class="line">soup.select(<span class="string">"body &gt; a"</span>)</span><br><span class="line"># []</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>同时用多种CSS选择器查询（符合条件1或条件2的tag）: </p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">soup.select(<span class="string">"#link1,#link2"</span>)</span><br><span class="line"># [&lt;a <span class="keyword">class</span>=<span class="string">"sister"</span> href=<span class="string">"http://example.com/elsie"</span> id=<span class="string">"link1"</span>&gt;Elsie&lt;/a&gt;,</span><br><span class="line">#  &lt;a <span class="keyword">class</span>=<span class="string">"sister"</span> href=<span class="string">"http://example.com/lacie"</span> id=<span class="string">"link2"</span>&gt;Lacie&lt;/a&gt;]</span><br></pre></td></tr></table></figure>
<p><br></p>
<hr>
<p>用 beautifulsoup 获取 HTML 网页源码里的内容，想删除或替换里面的 &nbsp; </p>
<p>使用 \xa0 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup = BeautifulSoup(<span class="string">'&lt;div&gt;a&amp;nbsp;b&lt;/div&gt;'</span>, <span class="string">'lxml'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup.prettify()</span><br><span class="line"><span class="string">u'&lt;html&gt;\n &lt;body&gt;\n  &lt;div&gt;\n   a\xa0b\n  &lt;/div&gt;\n &lt;/body&gt;\n&lt;/html&gt;'</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<hr>
<h4 id="text与-string"><a href="#text与-string" class="headerlink" title=".text与.string"></a>.text与.string</h4><p>在用find()方法找到特定的tag后，想获取里面的文本，可以用.text属性或者.string属性。 </p>
<p>在很多时候，两者的返回结果一致，但其实两者是有区别的 </p>
<p>例如 html 像这样： </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1、<span class="tag">&lt;<span class="name">td</span>&gt;</span>some text<span class="tag">&lt;/<span class="name">td</span>&gt;</span> </span><br><span class="line">2、<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">3、<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>more text<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">4、<span class="tag">&lt;<span class="name">td</span>&gt;</span>even <span class="tag">&lt;<span class="name">p</span>&gt;</span>more text<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>.string 属性得到的结果 </p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、some text</span><br><span class="line"><span class="number">2</span>、None</span><br><span class="line"><span class="number">3</span>、more text</span><br><span class="line"><span class="number">4</span>、None</span><br></pre></td></tr></table></figure>
<p>.text 属性得到的结果 </p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、<span class="keyword">some</span> <span class="built_in">text</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、more <span class="built_in">text</span></span><br><span class="line"><span class="number">3</span>、even more <span class="built_in">text</span></span><br></pre></td></tr></table></figure>
<p>.find和.string之间的差异： </p>
<p>第一行，td没有子标签，且有文本时，两者的返回结果一致，都是文本 </p>
<p>第二行，td没有子标签，且没有文本时，.string返回None，.text返回为空 </p>
<p>第三行，td只有一个子标签时，且文本只出现在子标签之间时，两者返回结果一致，都返回子标签内的文本 </p>
<p>第四行，最关键的区别，td有子标签，并且父标签td和子标签p各自包含一段文本时，两者的返回结果，存在很大的差异： </p>
<p>.string返回为空，因为文本数&gt;=2，string不知道获取哪一个 </p>
<p>.text返回的是，两段文本的拼接。 </p>
<p><br></p>
<hr>
<h3 id="使用-BeautifulSoup-提取网页内容-demo"><a href="#使用-BeautifulSoup-提取网页内容-demo" class="headerlink" title="使用 BeautifulSoup 提取网页内容 demo"></a>使用 BeautifulSoup 提取网页内容 demo</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># Filename: BeautifulSoup_demo.py</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">练习使用 BeautifulSoup 提取网页内容</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@author: v1coder</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">headers = &#123;<span class="string">'User-Agent'</span>:<span class="string">''</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 爬取biqukan.com 的小说《一念永恒》</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">biqukan_com</span><span class="params">()</span>:</span></span><br><span class="line">    url = <span class="string">'https://www.biqukan.com/1_1094/5403177.html'</span></span><br><span class="line">    req = requests.get(url)</span><br><span class="line"><span class="comment">#    text_data = req.text 也可以</span></span><br><span class="line">    content_data = req.content</span><br><span class="line">    soup = BeautifulSoup(content_data, <span class="string">'lxml'</span>)</span><br><span class="line"><span class="comment">#    print(soup.prettify())</span></span><br><span class="line">    texts = soup.find_all(<span class="string">'div'</span>, id=<span class="string">"content"</span>)  </span><br><span class="line"><span class="comment">#    texts = soup.find_all('div', class_="showtxt") #也可以</span></span><br><span class="line">    print(texts[<span class="number">0</span>].text.replace(<span class="string">'\xa0'</span>*<span class="number">8</span>,<span class="string">'\n'</span>))</span><br><span class="line"><span class="comment">#biqukan_com()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 爬取吐槽大会第三季每期标题</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tucaodahui_title</span><span class="params">()</span>:</span></span><br><span class="line">	url = <span class="string">'https://v.qq.com/detail/8/80844.html'</span></span><br><span class="line">	data = requests.get(url).text</span><br><span class="line">	soup = BeautifulSoup(data, <span class="string">'lxml'</span>)</span><br><span class="line">	titles = soup.find_all(<span class="string">'strong'</span>, itemprop=<span class="string">"episodeNumber"</span>)</span><br><span class="line">	<span class="keyword">for</span> title <span class="keyword">in</span> titles:</span><br><span class="line">		print(title.text)</span><br><span class="line"><span class="comment">#tucaodahui_title()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 爬取简书纯文本文章</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">jianshu</span><span class="params">()</span>:</span></span><br><span class="line">	url = <span class="string">'https://www.jianshu.com/p/713415f82576'</span></span><br><span class="line">	data = requests.get(url, headers=headers).text</span><br><span class="line">	soup = BeautifulSoup(data, <span class="string">'lxml'</span>)</span><br><span class="line">	texts = soup.find_all(<span class="string">'div'</span>, class_=<span class="string">"show-content-free"</span>)</span><br><span class="line">	print(texts[<span class="number">0</span>].text)</span><br><span class="line"><span class="comment">#jianshu()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 豆瓣电影 TOP250</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">douban_TOP250</span><span class="params">()</span>:</span></span><br><span class="line">	url = <span class="string">'https://movie.douban.com/top250'</span></span><br><span class="line">	data = requests.get(url, headers=headers).text</span><br><span class="line">	soup = BeautifulSoup(data, <span class="string">'lxml'</span>)</span><br><span class="line">	comments = soup.find_all(<span class="string">'span'</span>, class_=<span class="string">"inq"</span>)</span><br><span class="line">	titles = soup.find_all(<span class="string">'img'</span>, width=<span class="string">"100"</span>)</span><br><span class="line">	<span class="keyword">for</span> num <span class="keyword">in</span> range(len(titles)):</span><br><span class="line">		<span class="comment"># titles[num].get('alt') get方法，传入属性的名称，获得属性值</span></span><br><span class="line">		title = str(num+<span class="number">1</span>) + <span class="string">'.'</span> + <span class="string">'《'</span> + titles[num].get(<span class="string">'alt'</span>) + <span class="string">'》'</span></span><br><span class="line">		comment = <span class="string">'  ：'</span> + comments[num].text</span><br><span class="line">		print(title)</span><br><span class="line">		print(comment)</span><br><span class="line">		print()</span><br><span class="line"><span class="comment">#douban_TOP250()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 电影天堂最新电影</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dytt</span><span class="params">()</span>:</span></span><br><span class="line">	url = <span class="string">'https://www.dytt8.net/'</span></span><br><span class="line">	data = requests.get(url, headers=headers).content</span><br><span class="line">	soup = BeautifulSoup(data, <span class="string">'lxml'</span>)</span><br><span class="line">	text = soup.find(<span class="string">'div'</span>, class_=<span class="string">"co_content8"</span>)</span><br><span class="line">	dates = text.find_all(<span class="string">'font'</span>)  <span class="comment"># 得到日期</span></span><br><span class="line"><span class="comment">#	for date in dates[1:]:</span></span><br><span class="line"><span class="comment">#		print(date.text)</span></span><br><span class="line">	names = text.select(<span class="string">"td a"</span>)  <span class="comment"># 得到电影名</span></span><br><span class="line">	num = <span class="number">1</span></span><br><span class="line">	<span class="keyword">for</span> name <span class="keyword">in</span> names[<span class="number">2</span>::<span class="number">2</span>]:</span><br><span class="line">		print(name.text)</span><br><span class="line">		print(dates[num].text)</span><br><span class="line">		print()</span><br><span class="line">		num += <span class="number">1</span></span><br><span class="line"><span class="comment">#dytt()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 妹子图1，输出图片链接</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mmjpg</span><span class="params">()</span>:</span></span><br><span class="line">	url = <span class="string">'http://www.mmjpg.com/'</span></span><br><span class="line">	data = requests.get(url, headers=headers).content</span><br><span class="line">	soup = BeautifulSoup(data, <span class="string">'lxml'</span>)</span><br><span class="line">	url_tags = soup.find_all(<span class="string">'img'</span>, width=<span class="string">"220"</span>)</span><br><span class="line">	<span class="keyword">for</span> url_tag <span class="keyword">in</span> url_tags:</span><br><span class="line">		pic_url = url_tag[<span class="string">'src'</span>]  <span class="comment"># 获得属性值用 ['src'] 或 get('src')</span></span><br><span class="line">		print(pic_url)</span><br><span class="line"><span class="comment">#mmjpg()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 妹子图2，输出图片链接</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">haopic_me</span><span class="params">()</span>:</span></span><br><span class="line">	url = <span class="string">'http://www.haopic.me/tag/meizitu'</span></span><br><span class="line">	data = requests.get(url, headers=headers).content</span><br><span class="line">	soup = BeautifulSoup(data, <span class="string">'lxml'</span>)</span><br><span class="line">	url_tags = soup.find_all(<span class="string">'div'</span>, class_=<span class="string">"post"</span>)</span><br><span class="line">	<span class="keyword">for</span> url_tag <span class="keyword">in</span> url_tags:</span><br><span class="line">		pic_url = url_tag.find(<span class="string">'img'</span>)[<span class="string">'src'</span>]  </span><br><span class="line">		print(pic_url)</span><br><span class="line"><span class="comment">#haopic_me()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 妹子图3，输出图片链接</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mzitu_com</span><span class="params">()</span>:</span></span><br><span class="line">	url = <span class="string">'https://www.mzitu.com/'</span></span><br><span class="line">	data = requests.get(url, headers=headers).content</span><br><span class="line">	soup = BeautifulSoup(data, <span class="string">'lxml'</span>)</span><br><span class="line">	url_tags = soup.find_all(<span class="string">'img'</span>, class_=<span class="string">'lazy'</span>)</span><br><span class="line">	<span class="keyword">for</span> url_tag <span class="keyword">in</span> url_tags:</span><br><span class="line">		pic_url = url_tag.get(<span class="string">'data-original'</span>)</span><br><span class="line">		print(pic_url)</span><br><span class="line"><span class="comment">#mzitu_com()</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<hr>
<p>鸣谢：<br><a href="http://cuiqingcai.com/1319.html" target="_blank" rel="noopener">Beautiful Soup的用法 | 静觅</a><br><a href="http://beautifulsoup.readthedocs.io/zh_CN/latest/#id8" target="_blank" rel="noopener">Beautiful Soup 4.4.0 文档</a><br><a href="https://segmentfault.com/a/1190000014512935" target="_blank" rel="noopener">BeautifulSoup解析网页</a></p>
<p>2018-12-27</p>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>
    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        
        <li>
            <a target="_blank" href="https://github.com/v1coder">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
